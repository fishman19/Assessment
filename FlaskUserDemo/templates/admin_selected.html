{% extends '_layout.html' %}

{% block title %}Subject Selections{% endblock %}

{% block content %}
<table>
    {% if result|length == 0 %}
    Nobody has selected any subjects yet.
    {% else %}
    <tr>
        <th>Student ID</th>
        <th>Student Name</th>
        <th>Subject 1</th>
        <th>Subject 2</th>
        <th>Subject 3</th>
        <th>Subject 4</th>
        <th>Subject 5</th>
    </tr>
    {% for row in result %}
    <tr>
        <td>
            {{ row.id }}
        </td>
        <td>
            {{ row.first_name }}
        </td>
        {% set list = row["GROUP_CONCAT(subjects.name)"].split(',') %}
        <td>
            {{ list[0] }}
        </td>
        <td>
            {{ list[1] }}
        </td>
        <td>
            {{ list[2] }}
        </td>
        <td>
            {{ list[3] }}
        </td>
        <td>
            {{ list[4] }}
        </td>
    </tr>
    {% endfor %}
    {% endif %}
</table>
<a href="/">Return to Home</a>
{% endblock %}